<!DOCTYPE html>
<html>
<head>
<title>RSSTag - Processing Items</title>
{% include 'head-data.html' %}
</head>
<body>
{% import 'main-menu.html' as menu with context %}{% import 'global-status.html' as g_status with context %}
<noscript>
    <h1>Please enable javascript in your browser</h1>
</noscript>
<div id="global_tools">
    {% include "logo.html" %}
    <div class="panel right_half">
        <span class="login_button global_tools_button">
            <a href="/data-sources">{% if provider %}{{provider}}{% else %}Data sources{% endif %}</a>
        </span>
        {{ g_status.global_status() }}
        {{ menu.settings_menu() }}
    </div>
</div>
<div class="page screen_middle">
    <h1>Items in Processing</h1>
    
    <div class="processing-section">
        <h2>Posts</h2>
        {% if posts %}
            <ul class="processing-list">
            {% for post in posts %}
                <li>
                    {{ post.title or post.pid }} 
                    (Processing: {{ post.processing }} - {{ post.processing|int|timestamp_to_datetime if post.processing else 'N/A' }})
                    <form action="/processing/reset" method="post" class="inline-form">
                        <input type="hidden" name="type" value="post">
                        <input type="hidden" name="id" value="{{ post.pid }}">
                        <input type="submit" value="Reset" onclick="return confirm('Reset processing for this post?')">
                    </form>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No posts in processing.</p>
        {% endif %}
    </div>

    <div class="processing-section">
        <h2>Tags</h2>
        {% if tags %}
            <ul class="processing-list">
            {% for tag in tags %}
                <li>
                    {{ tag.tag }} 
                    (Processing: {{ tag.processing }} - {{ tag.processing|int|timestamp_to_datetime if tag.processing else 'N/A' }})
                    <form action="/processing/reset" method="post" class="inline-form">
                        <input type="hidden" name="type" value="tag">
                        <input type="hidden" name="id" value="{{ tag.tag }}">
                        <input type="submit" value="Reset" onclick="return confirm('Reset processing for this tag?')">
                    </form>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No tags in processing.</p>
        {% endif %}
    </div>
    
    <div class="root_item"><a href="/">Back to Home</a></div>
</div>

<div id="status" ><span></span></div>
{% include "root-footer.html" %}
<div id="progressbar"></div></body>
</html>
